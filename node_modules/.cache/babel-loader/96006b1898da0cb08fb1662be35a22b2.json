{"ast":null,"code":"import { cloneElement } from \"react\";\nexport const PROB_INFECTION = 0.6;\nexport const PROB_INFECTION_DECAY = 0.9;\nexport const randInt = maximum => Math.floor(Math.random() * (maximum - 0 + 1)) + 0;\nexport const newWorld = (width, numInfected) => {\n  const world = {\n    People: [...Array(width).keys()].map(x => [...Array(width).keys()].map(y => {\n      return makePerson({\n        initX: x,\n        initY: y\n      });\n    }))\n  };\n\n  if (numInfected) {\n    let infectedPicks = [];\n\n    while (infectedPicks.length < numInfected) {\n      const newRand = randInt(width * width);\n\n      if (!(newRand in infectedPicks)) {\n        infectedPicks.push(newRand);\n      }\n    }\n\n    console.log(infectedPicks);\n    infectedPicks.forEach(pick => world.People[(Math.floor(pick / width), pick % width)].infected = true);\n  }\n\n  return world;\n};\nexport const getNextStateOfWorld = (currentState, neighborAddresses) => {\n  // currentState is an object consisting of\n  // People: list of list of Persons, i.e. Persons[x][y] gives you the person at x,y\n  // \n  const width = currentState.People.length;\n  const People = currentState.People; // console.log(People);\n\n  const newInfected = [];\n  People.forEach((col, x) => {\n    newInfected[x] = [];\n    col.forEach((row, y) => {\n      const neighbors = getNeighborsForPerson(People[x][y], People, neighborAddresses); // console.log(neighbors);\n\n      newInfected[x][y] = People[x][y].calcInfected(neighbors, 1);\n    });\n  }); // console.log(newInfected);\n\n  People.forEach((col, x) => {\n    col.forEach((row, y) => {\n      People[x][y].infected = newInfected[x][y];\n    });\n  });\n  return {\n    People: People\n  };\n};\nexport const getNeighborsForPerson = (person, AllPeople, neighborAddresses) => {\n  // console.log(person);\n  // console.log(neighborAddresses);\n  return {\n    0: neighborAddresses[person.x][person.y][0].map(address => {\n      return AllPeople[address[0]][address[1]];\n    })\n  };\n};\nexport const getAllNeighbors = width => {\n  const l = width - 1; // last index\n\n  return [...Array(width).keys()].map(x => [...Array(width).keys()].map(y => {\n    if (x < l && y < l && x > 0 && y > 0) return {\n      0: [[x - 1, y - 1], [x, y - 1], [x + 1, y - 1], [x - 1, y], [x + 1, y], [x - 1, y + 1], [x, y + 1], [x + 1, y + 1]]\n    };\n    if (x === 0 && y === 0) return {\n      0: [[1, 0], [1, 1], [0, 1]]\n    };\n    if (x === 0 && y === l) return {\n      0: [[0, l - 1], [1, l - 1], [1, l]]\n    };\n    if (x === l && y === 0) return {\n      0: [[l - 1, 0], [l - 1, 1], [l, 1]]\n    };\n    if (x === l && y === l) return {\n      0: [[l - 1, l - 1], [l - 1, l], [l, l - 1]]\n    };\n    if (x === 0) return {\n      0: [[x, y - 1], [x + 1, y - 1], [x + 1, y], [x, y + 1], [x + 1, y + 1]]\n    };\n    if (y === 0) return {\n      0: [[x - 1, y], [x + 1, y], [x - 1, y + 1], [x, y + 1], [x + 1, y + 1]]\n    };\n    if (x === l) return {\n      0: [[x - 1, y - 1], [x, y - 1], [x - 1, y], [x - 1, y + 1], [x, y + 1]]\n    };\n    if (y === l) return {\n      0: [[x - 1, y - 1], [x, y - 1], [x + 1, y - 1], [x - 1, y], [x + 1, y]]\n    };\n  })); // return neighborsByCoords;\n};\nexport const makePerson = properties => {\n  const {\n    initName,\n    initX,\n    initY,\n    initHealth,\n    initInfected,\n    initImmune\n  } = properties;\n  const name = initName ? initName : \"John\"; // health indicates whether person is normal, showing mild symptons, severe symptoms, or dead\n\n  const health = initHealth ? initHealth : 0; // infected is a boolean indicating whether person is infected \n\n  const infected = initInfected ? initInfected : false; // immune is a boolean indicating whether person is immune \n\n  const immune = initImmune ? initImmune : false;\n  const x = initX ? initX : 0;\n  const y = initY ? initY : 0;\n  return {\n    name: name,\n    x: x,\n    y: y,\n    health: health,\n    infected: infected,\n    immunue: immune,\n    calcInfected: (neighbors, distancing) => {\n      // neighbors is an object with different tiers of neighbors lists 0 is closest, 1 is next closest, etc\n      // distancing is a constant >= 1\n      // console.log(neighbors);\n      let probNotInfected = 1;\n      Object.keys(neighbors).forEach(neighborTier => {\n        const numNeighbors = neighbors[neighborTier].filter(neighbor => neighbor.infected).length; // console.log(numNeighbors);\n\n        probNotInfected = probNotInfected * Math.pow(1 - PROB_INFECTION * Math.pow(PROB_INFECTION_DECAY, neighborTier) / distancing, numNeighbors);\n      }); // console.log(name + \"'s chance of getting infected = \" + (1-probNotInfected));\n\n      return Math.random() > probNotInfected;\n    }\n  };\n};","map":{"version":3,"sources":["/Users/yan/Coding/flattenthecurve/src/Simulate.js"],"names":["cloneElement","PROB_INFECTION","PROB_INFECTION_DECAY","randInt","maximum","Math","floor","random","newWorld","width","numInfected","world","People","Array","keys","map","x","y","makePerson","initX","initY","infectedPicks","length","newRand","push","console","log","forEach","pick","infected","getNextStateOfWorld","currentState","neighborAddresses","newInfected","col","row","neighbors","getNeighborsForPerson","calcInfected","person","AllPeople","address","getAllNeighbors","l","properties","initName","initHealth","initInfected","initImmune","name","health","immune","immunue","distancing","probNotInfected","Object","neighborTier","numNeighbors","filter","neighbor","pow"],"mappings":"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","sourcesContent":["import { cloneElement } from \"react\";\n\nexport const PROB_INFECTION = 0.6\nexport const PROB_INFECTION_DECAY = 0.9\n\nexport const randInt = (maximum) =>  Math.floor(Math.random() * (maximum - 0 + 1)) + 0;\n\nexport const newWorld = (width,numInfected) => {\n\tconst world = {\n\t\tPeople: [...Array(width).keys()].map(x =>\n\t\t\t\t[...Array(width).keys()].map(y => {\n\t\t\t\t\treturn makePerson({initX:x,initY:y})\n\t\t\t\t})\n\t\t\t)\n\t\t}\n\t\n\tif (numInfected) {\n\t\tlet infectedPicks = [];\n\t\twhile (infectedPicks.length < numInfected) {\n\t\t\tconst newRand = randInt(width*width)\n\t\t\tif (!(newRand in infectedPicks)) {\n\t\t\t\tinfectedPicks.push(newRand);\n\t\t\t}\n\t\t}\n\t\tconsole.log(infectedPicks);\n\t\tinfectedPicks.forEach(pick => world.People[Math.floor(pick/width),pick%width].infected = true);\n\t}\n\treturn world;\n}\n\nexport const getNextStateOfWorld = (currentState,neighborAddresses) => {\n\t// currentState is an object consisting of\n\t// People: list of list of Persons, i.e. Persons[x][y] gives you the person at x,y\n\t// \n\n\tconst width = currentState.People.length;\n\tconst People = currentState.People;\n\n\t// console.log(People);\n\tconst newInfected = [];\n\n\tPeople.forEach((col,x) => {\n\t\tnewInfected[x] = [];\n\t\tcol.forEach((row,y) => {\n\t\t\tconst neighbors = getNeighborsForPerson(People[x][y],People,neighborAddresses);\n\t\t\t// console.log(neighbors);\n\t\t\tnewInfected[x][y] = People[x][y].calcInfected(neighbors,1);\n\t\t})\n\t})\n\n\t// console.log(newInfected);\n\tPeople.forEach((col,x) => {\n\t\tcol.forEach((row,y) => {\n\t\t\tPeople[x][y].infected = newInfected[x][y];\n\t\t})\n\t})\n\n\treturn {People:People}\n}\n\nexport const getNeighborsForPerson = (person,AllPeople,neighborAddresses) => {\n\t// console.log(person);\n\t// console.log(neighborAddresses);\n\treturn {\n\t\t0: neighborAddresses[person.x][person.y][0].map(address => {\n\t\t\t\treturn AllPeople[address[0]][address[1]];\n\t\t\t})\n\t};\n}\n\nexport const getAllNeighbors = (width) => {\n\tconst l = width-1; // last index\n\treturn [...Array(width).keys()].map(x =>\n\t\t[...Array(width).keys()].map(y => {\n\t\t\tif (x < l && y < l && x > 0 && y > 0 ) return {0:[[x-1,y-1],[x,y-1],[x+1,y-1],[x-1,y],[x+1,y],[x-1,y+1],[x,y+1],[x+1,y+1]]};\n\t\t\tif (x === 0 && y === 0) return {0:[[1,0],[1,1],[0,1]]};  \n\t\t\tif (x === 0 && y === l) return {0:[[0,l-1],[1,l-1],[1,l]]};  \n\t\t\tif (x === l && y === 0) return {0:[[l-1,0],[l-1,1],[l,1]]};  \n\t\t\tif (x === l && y === l) return {0:[[l-1,l-1],[l-1,l],[l,l-1]]};  \n\t\t\tif (x === 0) return {0:[[x,y-1],[x+1,y-1],[x+1,y],[x,y+1],[x+1,y+1]]};\n\t\t\tif (y === 0) return {0:[[x-1,y],[x+1,y],[x-1,y+1],[x,y+1],[x+1,y+1]]};\n\t\t\tif (x === l) return {0:[[x-1,y-1],[x,y-1],[x-1,y],[x-1,y+1],[x,y+1]]};\n\t\t\tif (y === l) return {0:[[x-1,y-1],[x,y-1],[x+1,y-1],[x-1,y],[x+1,y]]};\n\t\t})\n\t)\n\t// return neighborsByCoords;\n}\n\nexport const makePerson = (properties) => {\n\tconst {initName,initX,initY,initHealth,initInfected,initImmune} = properties;\n\t\n\tconst name = initName ? initName : \"John\";\n\t\n\t// health indicates whether person is normal, showing mild symptons, severe symptoms, or dead\n\tconst health = initHealth? initHealth : 0;\n\t\n\t// infected is a boolean indicating whether person is infected \n\tconst infected = initInfected ? initInfected : false;\n\t\n\t// immune is a boolean indicating whether person is immune \n\tconst immune = initImmune ? initImmune : false;\n\n\tconst x = initX ? initX : 0;\n\tconst y = initY ? initY : 0;\n\n\treturn {\n\t\tname: name,\n\t\tx: x,\n\t\ty: y,\n\t\thealth: health,\n\t\tinfected: infected,\n\t\timmunue: immune,\n\t\tcalcInfected: (neighbors,distancing) => {\n\t\t\t// neighbors is an object with different tiers of neighbors lists 0 is closest, 1 is next closest, etc\n\t\t\t// distancing is a constant >= 1\n\n\t\t\t// console.log(neighbors);\n\t\t\tlet probNotInfected = 1;\n\t\t\tObject.keys(neighbors).forEach(neighborTier => {\n\t\t\t\tconst numNeighbors = neighbors[neighborTier].filter(neighbor => neighbor.infected).length;\n\t\t\t\t// console.log(numNeighbors);\n\t\t\t\tprobNotInfected = probNotInfected \n\t\t\t\t\t* Math.pow( 1- (PROB_INFECTION * Math.pow(PROB_INFECTION_DECAY,neighborTier) / distancing) , numNeighbors )\n\t\t\t})\n\n\t\t\t// console.log(name + \"'s chance of getting infected = \" + (1-probNotInfected));\n\n\t\t\treturn Math.random() > probNotInfected;\n\t\t}\n\t}\n}"]},"metadata":{},"sourceType":"module"}